version: v1.0

name: Learn About Ci/Cd Repository

agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Building Client Docker os_image
    task:
      jobs:
        - name: Docker Hub
          commands:
            - checkout
            - echo $DOCKER_PASSWORD | docker login --username "$DOCKER_USERNAME" --password-stdin
            - docker build -t client-ci-cd:v0.1 ./client/
            - docker tag client-ci-cd:v0.1 "$DOCKER_USERNAME"/client-ci-cd:v0.1
            - docker push "$DOCKER_USERNAME"/client-ci-cd:v0.1
            - docker pull "$DOCKER_USERNAME"/client-ci-cd:v0.1
            - docker images
